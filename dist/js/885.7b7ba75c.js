"use strict";(self["webpackChunkvuejs_essential"]=self["webpackChunkvuejs_essential"]||[]).push([[885],{3885:function(a,s,t){t.r(s),t.d(s,{default:function(){return k}});var e=t(6252),l=t(9963);const r={class:"col-md-9 left-col"},o={class:"panel panel-default padding-md"},i={class:"panel-body"},n=(0,e._)("h2",null,[(0,e._)("i",{class:"fa fa-picture-o"}),(0,e.Uk)(" 请输入头像地址")],-1),c=(0,e._)("hr",null,null,-1),d={"data-validator-form":""},u={class:"form-group"},v=(0,e._)("label",null,"头像预览：",-1),m=["src","alt"],p={class:"form-group row"},h={class:"col-md-8"},g={class:"form-group"},_={class:"col-md-8"};function f(a,s,t,f,w,y){const b=(0,e.up)("Message"),k=(0,e.Q2)("validator");return(0,e.wg)(),(0,e.iD)("div",r,[(0,e._)("div",o,[(0,e._)("div",i,[n,(0,e.Wm)(b,{show:w.msgShow,msg:w.msg,type:w.msgType},null,8,["show","msg","type"]),c,(0,e._)("div",d,[(0,e._)("div",u,[v,(0,e._)("div",null,[(0,e._)("img",{src:w.avatar,class:"avatar-preview-img",alt:w.alt},null,8,m)])]),(0,e._)("div",p,[(0,e._)("div",h,[(0,e.wy)((0,e._)("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>w.avatar=a),type:"text",class:"form-control avatar-input"},null,512),[[l.nr,w.avatar,void 0,{trim:!0,lazy:!0}],[k,{title:"头像地址"},void 0,{required:!0}]])])]),(0,e._)("div",g,[(0,e._)("div",_,[(0,e._)("button",{type:"submit",class:"btn btn-lg btn-primary",onClick:s[1]||(s[1]=(...a)=>y.updateAvatar&&y.updateAvatar(...a))},"上传头像")])])])])])])}var w={name:"EditAvatar",data(){return{avatar:"sdf",alt:"",msg:"",msgType:"",msgShow:!1}},created(){const a=this.$store.state.user;this.avatar=a.avatar,console.log(a),console.log(a.avatar),this.alt=a.sex},methods:{updateAvatar(){const a=this.avatar;if(a){let s=new Image;s.onload=()=>{this.$store.dispatch("updateUser",{avatar:a}),this.$message.show("上传成功","success")},s.onerror=()=>{this.$message.show("上传失败呢","error")},s.src=a}},show(a,s="warning"){this.msg=a,this.msgType=s,this.msgShow=!1,this.$nextTick((()=>{this.msgShow=!0}))}}},y=t(3744);const b=(0,y.Z)(w,[["render",f]]);var k=b}}]);
//# sourceMappingURL=885.7b7ba75c.js.map